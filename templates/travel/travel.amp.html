<!doctype html>

<!---
Copyright 2017 The AMP Start Authors. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS-IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

{{#travel}}
<html âš¡>
  {{> ../../utils/amp-page-head.snip.html}}
  <body>
    {{> ./partials/util/initial-state.snip.html}}
    <amp-carousel
      class="view-controller"
      width="100vw"
      height="100vh"
      type="slides"
      [slide]="ui_viewIndex"
      on="slideChange:AMP.setState({ui_viewIndex: event.index})"
    >
      <section>
        <div
          class="view-controller-view view-controller-view-active"
          [class]="'view-controller-view' + (ui_viewIndex == 0 ? ' view-controller-view-active' : '')"
        >
          {{> ./partials/search-navbar/search-navbar.snip.html}}

          {{> ./partials/hero/hero.snip.html}}

          <!--
            Put all sections below the hero in a relatve positioned div to pull
            them above the absolutely positioned angled divs below the hero.
          -->
          <div class="relative">
            {{> ./partials/discover/discover.snip.html}}

            {{> ./partials/activities/activities.snip.html}}

            {{> ./partials/popular/popular.snip.html}}

            {{> ./partials/featured/featured.snip.html}}

            {{> ./partials/search/search.snip.html}}

            {{> ./partials/footer/footer.snip.html}}
          </div>
        </div>
      </section>
      <section>
        <div
          class="view-controller-view flex flex-column"
          [class]="'view-controller-view flex flex-column' + (ui_viewIndex == 1 ? ' view-controller-view-active' : '')"
        >
          <div
            class="overlay-fx-scale flex-auto flex flex-column"
            [class]="'overlay-fx-scale flex-auto flex flex-column' + (ui_filterPane ? ' overlay-fx-scale-active' : '')"
          >
            <div class="flex-none">
              <div
                class="no-focus"
                role="button"
                tabindex="-1"
                on="tap:AMP.setState({ui_filterPane: false, ui_sortPane: false})"
              >
                {{> ./partials/results-navbar/results-navbar.snip.html}}
              </div>

              {{> ./partials/filter-bar/filter-bar.snip.html}}

              {{> ./partials/filter-pane/filter-pane.snip.html}}

              {{> ./partials/sort-bar/sort-bar.snip.html}}

            </div>
            <div
              class="no-focus flex-auto overflow-auto flex"
              role="button"
              tabindex="-1" on="tap:AMP.setState({ui_filterPane: false, ui_sortPane: false})"
            >
              <div class="flex-auto flex flex-column">
                <div class="flex-grow">
                  {{> ./partials/results/results.snip.html}}
                </div>
                <div class="flex-none">
                  {{> ./partials/footer/footer.snip.html}}
                </div>
              </div>
            </div>
          </div>
          {{> ./partials/filter-overlay/filter-overlay.snip.html}}
        </div>
      </section>
    </amp-carousel>
  </body>
</html>
{{/travel}}
